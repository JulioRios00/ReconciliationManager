image: american_airline_api
description: american airline api
memorySize: 1024
timeout: 900
iamRoleStatementsInherit: true
iamRoleStatements:
  - Effect: "Allow"
    Action:
      - s3:ListBucket*
    Resource: "arn:aws:s3:::mtw-make-the-price-${self:custom.stage}-${aws:accountId}"
  - Effect: "Allow"
    Action:
      - s3:*Object
    Resource: "arn:aws:s3:::mtw-make-the-price-${self:custom.stage}-${aws:accountId}/*"
events:
  - httpApi:
      method: '*'
      path: '/flights/{proxy+}'
      authorizer: 
        name: CognitoAuthorizer
  - httpApi:
      method: 'OPTIONS'
      path: '/flights/{proxy+}'