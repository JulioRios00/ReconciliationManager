image: read_files_recon
iamRoleStatementsInherit: true
iamRoleStatements:
  - Effect: "Allow"
    Action:
      - s3:ListBucket
    Resource: "arn:aws:s3:::mtw-elementar-${self:custom.stage}-${aws:accountId}"
  - Effect: "Allow"
    Action:
      - s3:GetObject
    Resource: "arn:aws:s3:::mtw-elementar-${self:custom.stage}-${aws:accountId}/public/airline_files/*"
description: Reads the files from the ccs service uploaded by the catering company and airline company
memorySize: 1024
timeout: 600
events:
  - s3:
      bucket: mtw-elementar-${self:custom.stage}-${aws:accountId}
      event: s3:ObjectCreated:*
      existing: true
      rules:
        - prefix: public/airline_files/Airline Billing History/
          suffix: .csv
  - s3:
      bucket: mtw-elementar-${self:custom.stage}-${aws:accountId}
      event: s3:ObjectCreated:*
      existing: true
      rules:
        - prefix: public/airline_files/GCG Invoice History/
          suffix: .xlsx
